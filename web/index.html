<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Steganography v1.0</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Sidebar Toggle -->
    <button id="sidebarToggle" class="sidebar-toggle" onclick="toggleSidebar()">?</button>

    <!-- Sidebar -->
    <div id="sidebar" class="sidebar">
        <div class="sidebar-content">
            <button class="sidebar-close" onclick="toggleSidebar()">&times;</button>

            <h3>HƯỠNG DẪN NHANH</h3>

            <div class="guide-section">
                <h4>ẨN TIN NHẮN</h4>
                <ol>
                    <li>Chọn tab ẨN</li>
                    <li>Tải lên bất kỳ định dạng hình ảnh nào (JPG/PNG/GIF/WebP/SVG)</li>
                    <li>Tự động chuyển đổi sang PNG / BMP / TIFF nếu cần</li>
                    <li>Nhập tin nhắn bí mật</li>
                    <li>Chọn phương pháp: LSB / DCT / DWT</li>
                    <li>Tùy chọn: Đặt mật khẩu</li>
                    <li>Click ẨN TIN NHẮN</li>
                </ol>
            </div>

            <div class="guide-section">
                <h4>TRÍCH XUẤT TIN NHẮN</h4>
                <ol>
                    <li>Chọn tab TRÍCH XUẤT</li>
                    <li>Tải lên hình ảnh có tin nhắn ẩn</li>
                    <li>Chọn cùng một phương pháp được sử dụng để ẩn</li>
                    <li>Nhập mật khẩu nếu được sử dụng</li>
                    <li>Click TRÍCH XUẤT TIN NHẮN</li>
                </ol>
            </div>

            <div class="guide-section">
                <h4>HỖ TRỢ ĐỊNH DẠNG</h4>
                <ul>
                    <li><strong>Đầu vào:</strong> JPG, JPEG, PNG, GIF, WebP, SVG</li>
                    <li><strong>Đầu ra:</strong> PNG, BMP, TIFF</li>
                    <li><strong>Tự động chuyển đổi:</strong> Định dạng không hỗ trợ → PNG</li>
                </ul>
            </div>

            <div class="guide-section">
                <h4>GIẢI THÍCH PHƯƠNG PHÁP</h4>
                <ul>
                    <li><strong>LSB:</strong> Phương pháp chuẩn, công suất tốt</li>
                    <li><strong>DCT:</strong> Miền tần số, mạnh mẽ hơn</li>
                    <li><strong>DWT:</strong> Miền Wavelet, ẩn nâng cao</li>
                </ul>
            </div>

            <div class="guide-section">
                <h4>TIPS</h4>
                <ul>
                    <li>Đề xuất PNG để có kết quả tốt nhất</li>
                    <li>Hình ảnh lớn hơn = tin nhắn dài hơn</li>
                    <li>Ghi nhớ mật khẩu của bạn</li>
                    <li>Giữ an toàn hình ảnh gốc</li>
                </ul>
            </div>
        </div>
    </div>
    
    <!-- Sidebar Overlay -->
    <div id="sidebarOverlay" class="sidebar-overlay" onclick="toggleSidebar()"></div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay">
        <div class="loading-spinner"></div>
        <div id="loadingText" class="loading-text">ĐANG XỬ LÝ</div>
        <div class="loading-progress">
            <div id="loadingProgressBar" class="loading-progress-bar"></div>
        </div>
        <div id="loadingSteps" class="loading-steps">Đang khởi tạo...</div>
    </div>

    <!-- Skeleton Loading -->
    <div id="skeletonContainer" class="skeleton-container">
        <div class="container">
            <header>
                <div class="skeleton skeleton-header"></div>
                <div class="skeleton skeleton-text short"></div>
            </header>

            <main>
                <div class="skeleton skeleton-input" style="height: 50px; margin-bottom: 20px;"></div>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; flex: 1;">
                    <div class="skeleton-section">
                        <div class="skeleton skeleton-header"></div>
                        <div class="skeleton skeleton-file-area"></div>
                    </div>

                    <div class="skeleton-section">
                        <div class="skeleton skeleton-header"></div>
                        <div class="skeleton skeleton-input"></div>
                        <div class="skeleton skeleton-input"></div>
                    </div>

                    <div class="skeleton-section">
                        <div class="skeleton skeleton-header"></div>
                        <div class="skeleton skeleton-textarea"></div>
                    </div>

                    <div class="skeleton-section">
                        <div class="skeleton skeleton-header"></div>
                        <div class="skeleton skeleton-text long"></div>
                        <div class="skeleton skeleton-text medium"></div>
                        <div class="skeleton skeleton-text short"></div>
                    </div>
                </div>

                <div style="display: flex; justify-content: center; gap: 15px; margin-top: 20px;">
                    <div class="skeleton skeleton-button"></div>
                    <div class="skeleton skeleton-button"></div>
                </div>
            </main>

            <footer>
                <div class="skeleton skeleton-text medium"></div>
            </footer>
        </div>
    </div>

    <div id="mainContainer" class="container" style="display: none;">
        <header>
            <h1>STEGANOGRAPHY</h1>
            <p>v1.0</p>
        </header>

        <main>
            <div class="tabs">
                <div class="subtab">
                    <button class="tab-button active" onclick="showTab('encode', this)">ẨN</button>
                    <button class="tab-button" onclick="showTab('decode', this)">TRÍCH XUẤT</button>
                </div>
            </div>
                

            <!-- Encode Tab -->
            <div id="encode" class="tab-content active">
                <div class="left-panel">
                    <div class="section file-section">
                        <h3>FILE ĐẦU VÀO</h3>
                        <div class="file-input-container">
                            <input type="file" id="encodeFile" accept="image/*" onchange="handleFileUpload(this, 'encode')">
                            <label for="encodeFile" class="file-input-label">
                                CHỌN FILE
                            </label>
                        </div>
                        <div id="encodePreview" class="file-preview"></div>
                        <div id="encodeCapacity" class="capacity-info"></div>
                        
                        <!-- Format Conversion Section -->
                        <div id="formatConversion" class="format-conversion" style="display: none;">
                            <h4>CHUYỂN ĐỔI ĐỊNH DẠNG</h4>
                            <div class="conversion-info">
                                <span id="originalFormat"></span> → 
                                <select id="targetFormat">
                                    <option value="PNG">PNG (Khuyến khích)</option>
                                    <option value="BMP">BMP</option>
                                    <option value="TIFF">TIFF</option>
                                </select>
                            </div>
                            <div class="conversion-actions">
                                <button id="convertButton" onclick="convertImageFormat()" class="convert-button">
                                    ĐỔI ĐỊNH DẠNG
                                </button>
                                <div id="conversionProgress" class="conversion-progress" style="display: none;">
                                    <div class="progress-bar">
                                        <div class="progress-fill"></div>
                                    </div>
                                    <span>ĐANG CHUYỂN ĐỔI...</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="right-panel">
                    <div class="section message-section">
                        <h3>TIN NHẮN BÍ MẬT</h3>
                        <textarea id="messageText" placeholder="Nhập tin nhắn bí mật..." rows="6"></textarea>
                        <div class="char-count">
                            <span id="charCount">0</span> / <span id="maxChars">0</span>
                        </div>
                    </div>

                    <div class="controls-row">
                        <div class="method-tabs">
                            <label class="method-tab active"><input type="radio" name="stegoMethod" value="lsb" checked> LSB</label>
                            <label class="method-tab"><input type="radio" name="stegoMethod" value="dct"> DCT</label>
                            <label class="method-tab"><input type="radio" name="stegoMethod" value="dwt"> DWT</label>
                        </div>
                        <button id="encodeButton" onclick="encodeMessage()" class="hide-button" disabled>
                            ẨN
                        </button>
                    </div>

                    <div class="password-row">
                        <div class="password-container">
                            <input type="password" id="encodePassword" placeholder="Password (optional)">
                            <button type="button" onclick="togglePasswordVisibility('encodePassword')" class="password-toggle">HIỆN</button>
                        </div>
                        <div id="passwordStrength" class="strength-meter">
                            <div class="strength-bar"></div>
                            <span class="strength-text">KHÔNG CÓ MẬT KHẨU</span>
                        </div>
                    </div>

                    <button id="encodeDownloadBtn" onclick="downloadEncodedImage()" class="secondary-button" style="display: none;" disabled>
                        TẢI ẢNH XUỐNG
                    </button>
                    <div id="encodeProgress" class="progress-container" style="display: none;">
                        <div class="progress-bar">
                            <div class="progress-fill"></div>
                        </div>
                        <div class="progress-text">ĐANG XỬ LÝ</div>
                    </div>
                    <div id="encodeFakeLoading" class="fake-loading-container" style="display: none;">
                        <div class="fake-loading-text">đang xử lý...</div>
                    </div>
                </div>
            </div>

            <!-- Decode Tab -->
            <div id="decode" class="tab-content">
                <div class="left-panel">
                    <div class="section file-section">
                        <h3>NHẬP FILE</h3>
                        <div class="file-input-container">
                            <input type="file" id="decodeFile" accept="image/*" onchange="handleFileUpload(this, 'decode')">
                            <label for="decodeFile" class="file-input-label">
                                CHỌN FILE
                            </label>
                        </div>
                        <div id="decodePreview" class="file-preview"></div>
                    </div>
                </div>

                <div class="right-panel">
                    <div class="section message-section">
                        <h3>THÔNG ĐIỆP ĐÃ TRÍCH XUẤT</h3>
                        <textarea id="resultText" placeholder="Thông điệp sẽ hiển thị ở đây..." rows="6" readonly></textarea>
                        <div class="result-actions">
                            <button onclick="copyToClipboard()" class="secondary-button">SAO CHÉP</button>
                            <button onclick="downloadText()" class="secondary-button">TẢI XUỐNG</button>
                        </div>
                    </div>

                    <div class="controls-row">
                        <div class="method-tabs">
                            <label class="method-tab active"><input type="radio" name="decodeMethod" value="lsb" checked> LSB</label>
                            <label class="method-tab"><input type="radio" name="decodeMethod" value="dct"> DCT</label>
                            <label class="method-tab"><input type="radio" name="decodeMethod" value="dwt"> DWT</label>
                        </div>
                        <button id="decodeButton" onclick="decodeMessage()" class="hide-button" disabled>
                            TRÍCH XUẤT
                        </button>
                    </div>

                    <div class="password-row">
                        <div class="password-container">
                            <input type="password" id="decodePassword" placeholder="Mật khẩu (nếu được mã hóa/bảo vệ)">
                            <button type="button" onclick="togglePasswordVisibility('decodePassword')" class="password-toggle">SHOW</button>
                        </div>
                    </div>

                    <div id="decodeProgress" class="progress-container" style="display: none;">
                        <div class="progress-bar">
                            <div class="progress-fill"></div>
                        </div>
                        <div class="progress-text">ĐANG XỬ LÝ</div>
                    </div>
                    <div id="decodeFakeLoading" class="fake-loading-container" style="display: none;">
                        <div class="fake-loading-text">đang xử lý...</div>
                    </div>
                </div>
            </div>


        </main>

        <footer>
            <div class="status-bar">
                <span id="statusText">Tự chịu trách nhiệm khi sử dụng nhé !...</span>
                <span id="fileInfo"></span>
            </div>

            <div class="footer-links">
                <div class="footer-section">
                    <a href="https://github.com/wsxyanua/StegTool/blob/main/README.md" target="_blank" rel="noopener">README</a>
                    <a href="https://github.com/wsxyanua/StegTool/blob/main/USERGUIDE.md" target="_blank" rel="noopener">USER GUIDE</a>
                    <a href="https://github.com/wsxyanua/StegTool/blob/main/SECURITY.md" target="_blank" rel="noopener">SECURITY</a>
                </div>
                <div class="footer-trademark">
                    <span>&copy; 2025 STEGANOGRAPHY</span>
                    <span>Công cụ bảo mật quyền riêng tư (chuyên nghiệp… hoặc không 😅)</span>
                    <span>Tool được viết bởi xyanua.</span>
                </div>
            </div>
        </footer>
    </div>
    </div>

    <!-- Toast notifications -->
    <div id="toast" class="toast"></div>

    <!-- ImageConverter Script -->
    <script src="converter.js"></script>
    <script src="script.js"></script>
</body>
</html>
